# Session 6 - 2025-11-26

### 14. Include Column and Notes Support

**Objective**: Update the tool to support an "include" column in the CSV/Sheet to selectively skip clips, and a "notes" column for metadata.

#### Implementation
-   **Core Logic (`src/highlight_cuts/core.py`)**:
    -   Defined `Clip` dataclass to store `start`, `end`, `notes`, and `included` status.
    -   Updated `process_csv` to:
        -   Read "include" column (validates True/False/Blank).
        -   Read "notes" column.
        -   Return `Dict[str, List[Clip]]` instead of `List[Tuple]`.
-   **Web Interface (`src/highlight_cuts/web.py`)**:
    -   Updated `process_video_task` to filter out clips where `included=False`.
    -   Updated `get_clips` endpoint to display skipped clips with a "Skipped" badge and grayed-out styling.
    -   Redesigned clips table:
        -   Removed "Clip #", "Duration", and "Status" columns.
        -   Formatted "Start" and "End" as integers (no decimals).
        -   Added "Notes" column.
        -   Maintained row color coding for skipped clips.
-   **CLI (`src/highlight_cuts/cli.py`)**:
    -   Updated to handle `Clip` objects and filter out excluded clips before processing.

#### Testing
-   Updated `tests/test_core.py` to verify `Clip` object structure and "include" logic validation.
-   Updated `tests/test_web.py` and `tests/test_web_endpoints.py` to use `Clip` objects in mocks.
-   Updated `tests/test_cli.py` to use `Clip` objects in mocks.
-   Updated `tests/test_integration.py` and `tests/fixtures/test_clips.csv` to match the new schema.
-   **Result**: All tests passed.

#### Documentation
-   Updated `docs/google_sheets.md` to document the new columns.
-   Updated `docs/CHANGELOG.md`.

#### Outcome
-   Users can now control which clips are generated directly from the Google Sheet using the "include" column.
-   The Web UI provides visual feedback on which clips will be processed.
