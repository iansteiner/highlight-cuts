# Session Summary - 2025-11-28 (Session 2)

## What changed
- Parallelized `spike/bulk_test.py` with `--jobs` (spawn context) and per-process thread control; added hard stop on Ctrl+C to kill workers cleanly and scaled default threads by job count.
- Fixed tracking logic that reused first-frame boxes (caused frozen tracks/100% scores); now selects per-frame IDs, added drift metrics, frozen-track penalty, and overall quality heuristics that drop scores when tracks wander or stall.
- Added visual QA tool `spike/render_run_preview.py` to overlay tracked centers/bboxes onto source video for any saved run JSON.
- Added regression test `test_run_single_test_tracks_movement` to ensure per-frame tracking movement is captured.
- Quick sweep (18 runs, 4 jobs × 8 threads) now yields real metrics: quality scores 0–30 (median 17), success median ~58%, continuous-from-start median ~2.8s; drift ratios show movement (median ~0.067).

## Status/next steps
- For overnight breadth: `UV_CACHE_DIR=.uv_cache uv run python spike/bulk_test.py --full --jobs 4 --threads 6` (expect ~3–4h if ~500–600 runs; check printed run count).
- If time-boxing: add `--sample-size N --random-seed 42` (e.g., 300–400 configs for ~2–3h at 4 jobs).
- Spot-check a few best/worst runs visually with `spike/render_run_preview.py --run spike/bulk_test_output/runs/<file>.json --show-bbox` to validate heuristics vs. reality.

## Issues/risk
- Tracking quality remains low on the test clip (few runs achieve ≥5s continuous tracking); heuristics may still need tuning after visual validation.
- Multi-process runs are CPU-heavy; set `--threads` lower if RAM or contention spikes.
