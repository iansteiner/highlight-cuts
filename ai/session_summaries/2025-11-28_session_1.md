# Session Summary - 2025-11-28

## What changed
- Extended `spike/bulk_test.py` to support multi-tracker sweeps with per-run tracker YAML overrides (BoT-SORT `track_buffer`/`with_reid`, ByteTrack `track_buffer`/`track_low_thresh`). Added richer metrics: run start/end/elapsed, per-frame latency, streak metrics (longest tracked, max loss), ID switches, first-frame detection stats, peak RSS (if psutil).
- Added JSON sanitization (`ensure_jsonable`) to prevent serialization errors with numpy/Path types; fixed prior JSON dump failure.
- Introduced optional sampling flags (`--sample-size`, `--random-seed`) to cap exploration.
- Added unit tests in `spike/tests/test_bulk_test_utils.py` for tracker config overrides, streak metrics, and JSON sanitization. Tests pass (run via `UV_CACHE_DIR=.uv_cache uv run python -m pytest spike/tests`).
- Note: Previously generated 18-run outputs were deleted during retries; current outputs reflect a 4-run sampled quick sweep (all 100% success/quality).

## Status/next steps
- Run full 18-job quick sweep without sampling to regenerate broader results: `UV_CACHE_DIR=.uv_cache uv run python spike/bulk_test.py --quick`.
- For an overnight ~10h run, trim the full matrix or use `--full --sample-size N` based on measured per-run time (≈90s). A trimmed deterministic grid suggestion: 2 vids, models yolo11s/yolo11m, confs [0.18,0.22,0.26,0.30], BoT-SORT buffers 25/50 with_reid=True, ByteTrack buffers 25/50 with track_low_thresh=0.05, top 6 players → 384 runs (~9.6h at 90s/run).

## Issues/risk
- Long sweeps are CPU-bound; avoid running the untrimmed full grid (~1,500+ runs, ~40h).
- If uv cache permissions fail, prefix commands with `UV_CACHE_DIR=.uv_cache`.
